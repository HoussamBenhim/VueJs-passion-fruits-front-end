<template>
  <div>
    <nav class="z-20 fixed top-0 w-full">
      <div class="mx-auto px-2 bg-primary">
        <div class="flex items-center justify-between h-16">
          <!-- Mobile menu button Burger @click.prevent="switch_burger_icon_status"-->
          <Burgerbutton
            class="md:hidden"
            :burger-status="burger_icon_status"
            @switch_icon="switch_burger_icon_status"
          />
          <!-- logo -->
          <NuxtLink to="/">
            <Logo />
          </NuxtLink>

          <div
            class="absolute inset-y-0 right-0 flex items-center md:pr-2 md:mr-3 lg:mr-8 sm:static sm:inset-auto md:ml-6"
          >
            <!-- @click="toggelLoginForm" show or hide login/register form -->
            <LoginLogoutButton
              :name="getUserName"
              @toggle_login_form="show_hide_login_form"
            />
            <Basket
              :article-count="articlesPanier ? articlesPanier.length : 0"
            />
          </div>
        </div>
      </div>
      <!--  sous menu -->
      <div class="hidden sm:flex sm:items-stretch w-full h-24 bg-white border">
        <NuxtLink
          class="mt-2 cursor-pointer hover:text-primary flex-1 focus:outline-none flex justify-end"
          to="/fruits"
        >
          <svg
            :class="{
              'text-primary': currentPathName,
              'text-gray-200': !currentPathName,
            }"
            width="200"
            height="36"
            viewBox="0 0 230 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              class=" "
              d="M10.1966 1.28H40.5086L39.3566 6.752H24.5966L21.7886 19.928H34.1006L32.9486 25.472H20.6366L16.0286 47H0.476562L10.1966 1.28ZM47.2586 16.04H58.9946L60.0746 21.44H60.5786C61.6826 19.712 63.0986 18.248 64.8266 17.048C66.5546 15.848 68.8346 15.248 71.6666 15.248C71.8586 15.248 72.1466 15.272 72.5306 15.32C72.9626 15.32 73.4186 15.392 73.8986 15.536C74.4266 15.632 74.9546 15.8 75.4826 16.04C76.0586 16.232 76.6106 16.52 77.1386 16.904L73.9706 31.736H66.1226C66.0266 28.76 65.7626 26.696 65.3306 25.544C64.8986 24.344 64.2026 23.744 63.2426 23.744C62.7626 23.744 62.2346 23.864 61.6586 24.104C61.1306 24.296 60.5786 24.752 60.0026 25.472L55.3946 47H40.7066L47.2586 16.04ZM110.287 16.04H124.975L118.351 47H106.687L105.391 42.392H104.959C103.711 43.88 102.007 45.128 99.8472 46.136C97.7352 47.096 95.5992 47.576 93.4392 47.576C90.5592 47.576 88.3032 46.856 86.6712 45.416C85.0392 43.928 84.2232 42.008 84.2232 39.656C84.2232 38.456 84.4152 36.968 84.7992 35.192C85.2312 33.368 85.6152 31.664 85.9512 30.08L88.9752 16.04H103.591L99.9912 32.888C99.8952 33.272 99.7992 33.728 99.7032 34.256C99.6072 34.784 99.5112 35.312 99.4152 35.84C99.3192 36.32 99.2232 36.8 99.1272 37.28C99.0792 37.712 99.0552 38.072 99.0552 38.36C99.0552 39.08 99.1992 39.704 99.4872 40.232C99.8232 40.712 100.399 40.952 101.215 40.952C102.079 40.952 102.895 40.664 103.663 40.088C104.431 39.512 105.031 38.96 105.463 38.432L110.287 16.04ZM146.644 47H132.028L138.58 16.04H153.34L146.644 47ZM155.212 6.608C155.212 7.712 154.972 8.672 154.492 9.488C154.06 10.304 153.46 11 152.692 11.576C151.972 12.152 151.132 12.584 150.172 12.872C149.212 13.16 148.228 13.304 147.22 13.304C145.3 13.304 143.692 12.848 142.396 11.936C141.1 11.024 140.452 9.584 140.452 7.616C140.452 6.56 140.668 5.624 141.1 4.808C141.532 3.944 142.108 3.248 142.828 2.72C143.596 2.144 144.46 1.712 145.42 1.424C146.428 1.136 147.46 0.991996 148.516 0.991996C150.388 0.991996 151.972 1.448 153.268 2.36C154.564 3.272 155.212 4.688 155.212 6.608ZM164.354 16.04C166.13 15.656 167.69 15.224 169.034 14.744C170.378 14.264 171.602 13.664 172.706 12.944C173.858 12.224 174.938 11.336 175.946 10.28C177.002 9.224 178.13 7.928 179.33 6.392H186.746L184.658 16.04H190.274L189.338 20.864H183.65L180.698 34.904C180.458 36.008 180.266 36.992 180.122 37.856C179.978 38.72 179.906 39.392 179.906 39.872C179.906 40.832 180.242 41.432 180.914 41.672C181.634 41.912 182.954 42.032 184.874 42.032L183.794 47C183.458 47.096 182.93 47.168 182.21 47.216C181.538 47.264 180.77 47.312 179.906 47.36C179.09 47.456 178.226 47.504 177.314 47.504C176.45 47.552 175.682 47.576 175.01 47.576C173.81 47.576 172.634 47.48 171.482 47.288C170.33 47.144 169.298 46.832 168.386 46.352C167.474 45.824 166.73 45.08 166.154 44.12C165.626 43.16 165.362 41.864 165.362 40.232C165.362 39.656 165.386 38.936 165.434 38.072C165.53 37.208 165.698 36.248 165.938 35.192L168.962 20.864H163.346L164.354 16.04ZM218.542 25.112C218.59 24.872 218.638 24.632 218.686 24.392C218.734 24.152 218.758 23.888 218.758 23.6C218.758 22.736 218.59 21.944 218.254 21.224C217.966 20.456 217.366 20.072 216.454 20.072C215.638 20.072 214.822 20.432 214.006 21.152C213.19 21.824 212.782 22.736 212.782 23.888C212.782 24.656 212.974 25.28 213.358 25.76C213.79 26.192 214.342 26.552 215.014 26.84C215.686 27.128 216.43 27.368 217.246 27.56C218.11 27.752 218.95 27.944 219.766 28.136C220.918 28.424 221.998 28.784 223.006 29.216C224.062 29.6 224.998 30.128 225.814 30.8C226.63 31.472 227.278 32.312 227.758 33.32C228.238 34.28 228.478 35.48 228.478 36.92C228.478 38.936 227.998 40.64 227.038 42.032C226.126 43.376 224.83 44.48 223.15 45.344C221.518 46.16 219.574 46.736 217.318 47.072C215.11 47.408 212.734 47.576 210.19 47.576C206.302 47.576 203.086 47.288 200.542 46.712C197.998 46.136 196.221 45.584 195.213 45.056L196.726 37.856H206.446C206.398 38.096 206.374 38.336 206.374 38.576C206.374 38.768 206.374 38.984 206.374 39.224C206.374 40.328 206.614 41.216 207.094 41.888C207.622 42.512 208.51 42.824 209.758 42.824C211.15 42.824 212.134 42.44 212.71 41.672C213.334 40.856 213.646 40.112 213.646 39.44C213.646 38.768 213.382 38.192 212.854 37.712C212.374 37.184 211.75 36.752 210.982 36.416C210.214 36.032 209.35 35.72 208.39 35.48C207.478 35.192 206.59 34.928 205.726 34.688C205.102 34.544 204.382 34.304 203.566 33.968C202.798 33.632 202.054 33.152 201.334 32.528C200.614 31.904 200.014 31.112 199.534 30.152C199.054 29.144 198.813 27.896 198.813 26.408C198.813 24.296 199.318 22.544 200.326 21.152C201.382 19.712 202.726 18.56 204.358 17.696C206.038 16.832 207.91 16.208 209.974 15.824C212.086 15.44 214.198 15.248 216.31 15.248C218.95 15.248 221.446 15.488 223.798 15.968C226.15 16.448 228.07 17.072 229.558 17.84L227.902 25.112H218.542Z"
              fill="currentColor"
            />
          </svg>
        </NuxtLink>
        <NuxtLink
          class="mt-2 ml-10 flex-1 cursor-pointer focus:outline-none flex justify-start"
          to="/legumes"
        >
          <svg
            :class="{
              'text-primary': !currentPathName,
              'text-gray-200': currentPathName,
            }"
            width="250"
            height="49"
            viewBox="0 0 346 59"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              class=""
              d="M10.6239 0.279996H26.2479L17.7519 39.952H32.3679L31.1439 46H0.9039L10.6239 0.279996ZM57.1983 31.528C57.0063 32.584 56.8623 33.592 56.7663 34.552C56.7183 35.512 56.6943 36.376 56.6943 37.144C56.6943 37.576 56.7183 38.056 56.7663 38.584C56.8143 39.112 56.9103 39.616 57.0543 40.096C57.2463 40.528 57.4863 40.912 57.7743 41.248C58.1103 41.536 58.5663 41.68 59.1423 41.68C59.5743 41.68 60.0543 41.536 60.5823 41.248C61.1583 40.96 61.7103 40.552 62.2383 40.024C62.8143 39.496 63.3423 38.848 63.8223 38.08C64.3503 37.312 64.7583 36.448 65.0463 35.488H76.8543L74.9823 43.192C74.0223 43.816 72.9183 44.344 71.6703 44.776C70.4223 45.208 69.1023 45.568 67.7103 45.856C66.3183 46.096 64.9023 46.264 63.4623 46.36C62.0223 46.504 60.6543 46.576 59.3583 46.576C56.9583 46.576 54.7263 46.36 52.6623 45.928C50.5983 45.496 48.7983 44.752 47.2623 43.696C45.7263 42.64 44.5023 41.248 43.5903 39.52C42.7263 37.744 42.2943 35.56 42.2943 32.968C42.2943 30.616 42.6543 28.312 43.3743 26.056C44.1423 23.8 45.3903 21.808 47.1183 20.08C48.8943 18.304 51.2463 16.888 54.1743 15.832C57.1503 14.776 60.8463 14.248 65.2623 14.248C70.0623 14.248 73.6623 14.992 76.0623 16.48C78.5103 17.968 79.7343 20.296 79.7343 23.464C79.7343 24.76 79.5423 26.176 79.1583 27.712C78.7743 29.2 78.1983 30.472 77.4303 31.528H57.1983ZM66.7743 22.96C66.7743 21.472 66.5343 20.464 66.0543 19.936C65.5743 19.408 64.9983 19.144 64.3263 19.144C63.5583 19.144 62.8383 19.408 62.1663 19.936C61.5423 20.416 60.9663 21.088 60.4383 21.952C59.9103 22.768 59.4303 23.728 58.9983 24.832C58.5663 25.888 58.2063 27.016 57.9183 28.216H66.1263C66.2223 27.64 66.3183 27.04 66.4143 26.416C66.5103 25.888 66.5823 25.312 66.6303 24.688C66.7263 24.064 66.7743 23.488 66.7743 22.96ZM61.9503 10.792L68.6463 0.279996H81.0303L68.1423 10.792H61.9503ZM117.453 15.04H129.117L123.213 43.048C122.781 45.208 122.061 47.2 121.053 49.024C120.045 50.848 118.629 52.432 116.805 53.776C115.029 55.12 112.773 56.176 110.037 56.944C107.349 57.712 104.061 58.096 100.173 58.096C99.4533 58.096 98.5893 58.072 97.5813 58.024C96.5733 58.024 95.5413 58 94.4853 57.952C93.4293 57.952 92.4213 57.928 91.4613 57.88C90.5013 57.832 89.7333 57.784 89.1573 57.736L90.5253 52.552C92.0613 52.792 93.6213 52.912 95.2053 52.912C96.8373 52.96 98.2293 52.984 99.3813 52.984C100.821 52.984 102.021 52.84 102.981 52.552C103.989 52.312 104.805 51.904 105.429 51.328C106.101 50.752 106.629 49.984 107.013 49.024C107.445 48.064 107.781 46.888 108.021 45.496L108.885 40.816H108.381C108.093 41.248 107.661 41.776 107.085 42.4C106.557 42.976 105.861 43.552 104.997 44.128C104.133 44.656 103.101 45.112 101.901 45.496C100.749 45.832 99.4293 46 97.9413 46C96.2613 46 94.8213 45.76 93.6213 45.28C92.4693 44.752 91.5333 44.056 90.8133 43.192C90.0933 42.28 89.5653 41.224 89.2293 40.024C88.8933 38.776 88.7253 37.432 88.7253 35.992C88.7253 35.368 88.7733 34.408 88.8693 33.112C88.9653 31.816 89.1813 30.352 89.5173 28.72C89.9013 27.088 90.4293 25.432 91.1013 23.752C91.8213 22.024 92.7573 20.464 93.9093 19.072C95.1093 17.68 96.5733 16.528 98.3013 15.616C100.077 14.704 102.213 14.248 104.709 14.248C105.477 14.248 106.317 14.32 107.229 14.464C108.141 14.608 109.029 14.872 109.893 15.256C110.757 15.64 111.525 16.192 112.197 16.912C112.869 17.632 113.397 18.568 113.781 19.72H114.213L117.453 15.04ZM109.389 21.304C108.237 21.304 107.277 21.928 106.509 23.176C105.741 24.376 105.117 25.792 104.637 27.424C104.157 29.056 103.797 30.688 103.557 32.32C103.365 33.904 103.269 35.08 103.269 35.848C103.269 36.808 103.413 37.624 103.701 38.296C104.037 38.92 104.613 39.232 105.429 39.232C105.909 39.232 106.365 39.112 106.797 38.872C107.277 38.632 107.709 38.368 108.093 38.08C108.525 37.744 108.885 37.408 109.173 37.072C109.509 36.736 109.749 36.472 109.893 36.28L112.557 23.68C112.173 23.152 111.717 22.624 111.189 22.096C110.709 21.568 110.109 21.304 109.389 21.304ZM163.758 15.04H178.446L171.822 46H160.158L158.862 41.392H158.43C157.182 42.88 155.478 44.128 153.318 45.136C151.206 46.096 149.07 46.576 146.91 46.576C144.03 46.576 141.774 45.856 140.142 44.416C138.51 42.928 137.694 41.008 137.694 38.656C137.694 37.456 137.886 35.968 138.27 34.192C138.702 32.368 139.086 30.664 139.422 29.08L142.446 15.04H157.062L153.462 31.888C153.366 32.272 153.27 32.728 153.174 33.256C153.078 33.784 152.982 34.312 152.886 34.84C152.79 35.32 152.694 35.8 152.598 36.28C152.55 36.712 152.526 37.072 152.526 37.36C152.526 38.08 152.67 38.704 152.958 39.232C153.294 39.712 153.87 39.952 154.686 39.952C155.55 39.952 156.366 39.664 157.134 39.088C157.902 38.512 158.502 37.96 158.934 37.432L163.758 15.04ZM205.516 19.648C206.524 18.688 207.652 17.8 208.9 16.984C210.004 16.312 211.324 15.688 212.86 15.112C214.396 14.536 216.124 14.248 218.044 14.248C220.348 14.248 222.052 14.776 223.156 15.832C224.308 16.888 224.956 18.184 225.1 19.72H225.532C226.636 18.712 227.836 17.8 229.132 16.984C230.236 16.312 231.532 15.688 233.02 15.112C234.508 14.536 236.092 14.248 237.772 14.248C240.268 14.248 242.284 14.944 243.82 16.336C245.404 17.68 246.196 19.432 246.196 21.592C246.196 22.696 246.004 24.16 245.62 25.984C245.236 27.808 244.804 29.8 244.324 31.96L241.3 46H227.116L231.004 27.208C231.148 26.488 231.292 25.792 231.436 25.12C231.58 24.448 231.652 23.896 231.652 23.464C231.652 22.792 231.46 22.24 231.076 21.808C230.692 21.328 230.14 21.088 229.42 21.088C228.508 21.088 227.644 21.424 226.828 22.096C226.06 22.72 225.46 23.248 225.028 23.68L220.348 46H206.884L210.844 27.208C210.94 26.584 211.06 25.96 211.204 25.336C211.348 24.664 211.42 24.064 211.42 23.536C211.42 22.816 211.228 22.24 210.844 21.808C210.508 21.328 209.98 21.088 209.26 21.088C208.396 21.088 207.556 21.4 206.74 22.024C205.972 22.648 205.372 23.176 204.94 23.608L200.188 46H185.5L192.052 15.04H203.788L205.084 19.648H205.516ZM271.131 31.528C270.939 32.584 270.795 33.592 270.699 34.552C270.651 35.512 270.627 36.376 270.627 37.144C270.627 37.576 270.651 38.056 270.699 38.584C270.747 39.112 270.843 39.616 270.987 40.096C271.179 40.528 271.419 40.912 271.707 41.248C272.043 41.536 272.499 41.68 273.075 41.68C273.507 41.68 273.987 41.536 274.515 41.248C275.091 40.96 275.643 40.552 276.171 40.024C276.747 39.496 277.275 38.848 277.755 38.08C278.283 37.312 278.691 36.448 278.979 35.488H290.787L288.915 43.192C287.955 43.816 286.851 44.344 285.603 44.776C284.355 45.208 283.035 45.568 281.643 45.856C280.251 46.096 278.835 46.264 277.395 46.36C275.955 46.504 274.587 46.576 273.291 46.576C270.891 46.576 268.659 46.36 266.595 45.928C264.531 45.496 262.731 44.752 261.195 43.696C259.659 42.64 258.435 41.248 257.523 39.52C256.659 37.744 256.227 35.56 256.227 32.968C256.227 30.616 256.587 28.312 257.307 26.056C258.075 23.8 259.323 21.808 261.051 20.08C262.827 18.304 265.179 16.888 268.107 15.832C271.083 14.776 274.779 14.248 279.195 14.248C283.995 14.248 287.595 14.992 289.995 16.48C292.443 17.968 293.667 20.296 293.667 23.464C293.667 24.76 293.475 26.176 293.091 27.712C292.707 29.2 292.131 30.472 291.363 31.528H271.131ZM280.707 22.96C280.707 21.472 280.467 20.464 279.987 19.936C279.507 19.408 278.931 19.144 278.259 19.144C277.491 19.144 276.771 19.408 276.099 19.936C275.475 20.416 274.899 21.088 274.371 21.952C273.843 22.768 273.363 23.728 272.931 24.832C272.499 25.888 272.139 27.016 271.851 28.216H280.059C280.155 27.64 280.251 27.04 280.347 26.416C280.443 25.888 280.515 25.312 280.563 24.688C280.659 24.064 280.707 23.488 280.707 22.96ZM324.114 24.112C324.162 23.872 324.21 23.632 324.258 23.392C324.306 23.152 324.33 22.888 324.33 22.6C324.33 21.736 324.162 20.944 323.826 20.224C323.538 19.456 322.938 19.072 322.026 19.072C321.21 19.072 320.394 19.432 319.578 20.152C318.762 20.824 318.354 21.736 318.354 22.888C318.354 23.656 318.546 24.28 318.93 24.76C319.362 25.192 319.914 25.552 320.586 25.84C321.258 26.128 322.002 26.368 322.818 26.56C323.682 26.752 324.522 26.944 325.338 27.136C326.49 27.424 327.57 27.784 328.578 28.216C329.634 28.6 330.57 29.128 331.386 29.8C332.202 30.472 332.85 31.312 333.33 32.32C333.81 33.28 334.05 34.48 334.05 35.92C334.05 37.936 333.57 39.64 332.61 41.032C331.698 42.376 330.402 43.48 328.722 44.344C327.09 45.16 325.146 45.736 322.89 46.072C320.682 46.408 318.306 46.576 315.762 46.576C311.874 46.576 308.658 46.288 306.114 45.712C303.57 45.136 301.794 44.584 300.786 44.056L302.298 36.856H312.018C311.97 37.096 311.946 37.336 311.946 37.576C311.946 37.768 311.946 37.984 311.946 38.224C311.946 39.328 312.186 40.216 312.666 40.888C313.194 41.512 314.082 41.824 315.33 41.824C316.722 41.824 317.706 41.44 318.282 40.672C318.906 39.856 319.218 39.112 319.218 38.44C319.218 37.768 318.954 37.192 318.426 36.712C317.946 36.184 317.322 35.752 316.554 35.416C315.786 35.032 314.922 34.72 313.962 34.48C313.05 34.192 312.162 33.928 311.298 33.688C310.674 33.544 309.954 33.304 309.138 32.968C308.37 32.632 307.626 32.152 306.906 31.528C306.186 30.904 305.586 30.112 305.106 29.152C304.626 28.144 304.386 26.896 304.386 25.408C304.386 23.296 304.89 21.544 305.898 20.152C306.954 18.712 308.298 17.56 309.93 16.696C311.61 15.832 313.482 15.208 315.546 14.824C317.658 14.44 319.77 14.248 321.882 14.248C324.522 14.248 327.018 14.488 329.37 14.968C331.722 15.448 333.642 16.072 335.13 16.84L333.474 24.112H324.114Z"
              fill="currentColor"
            />
          </svg>
        </NuxtLink>
      </div>
    </nav>
  </div>
</template>

<script>
import { mapGetters, mapState } from 'vuex'
import Burgerbutton from './Burgerbutton'
import LoginLogoutButton from './LoginLogoutButton'
import Basket from './Basket'

export default {
  components: {
    Burgerbutton,
    LoginLogoutButton,
    Basket,
  },
  data() {
    return {
      burger_icon_status: false,
      user_is_logged: false,
    }
  },
  computed: {
    ...mapGetters('loginModule', ['getUserName']),
    ...mapGetters(['getMenuState']),
    ...mapState('navBarModule', ['navBarStatus']),
    ...mapState('panierModule', ['articlesPanier']),
    currentPathName() {
      console.log(this.getCurrentPath())
      return this.getCurrentPath() === 'fruits' || this.getCurrentPath() === ''
    },
  },
  methods: {
    switch_burger_icon_status() {
      this.burger_icon_status = !this.burger_icon_status
    },
    show_hide_login_form() {
      this.$store.dispatch('loginModule/setLoginFormState')
    },
    logout() {
      this.$store.dispatch('loginModule/logoutUser')
    },
    getCurrentPath() {
      return this.$nuxt.$route.path.substring(1)
    },
  },

  /* methods: {
    toggelLoginForm() {
      this.$store.dispatch('userLoginRegister/setLoginFormState')
    },
    toggelMenu() {
      this.$store.dispatch('setMenuState')
      this.isOpen = this.getMenuState
    },
    logout() {
      this.$store.dispatch('userLoginRegister/logoutUser')
    },
  },
  computed: {
    ...mapGetters('LoginModule', ['isLogged', 'getUser']),
    ...mapGetters(['getMenuState']),
  }, */
}
</script>

<style lang="css" scoped>
/* exact link will show the primary color for only the exact matching link */
.nuxt-link-exact-active {
  color: red;
  opacity: 1;
  text-decoration: none;
}
</style>
